<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<canvas id='demo'></canvas>
		<img src='' id='img'/>
		<script>
		    var canvas = document.getElementById("demo");
		    canvas.width = 600;
		    canvas.height = 600;
		    canvas.style.border = "1px solid #000";
		    var ctx = canvas.getContext("2d");
		    ctx.fillStyle='red';  
		    ctx.fillRect(10,10,50,50);
		    
		    var x=10;
		    setInterval(function(){
		    	canvas.width=canvas.width;//重绘
		    	ctx.fillStyle='red';
		    	x++;
		    	ctx.fillRect(x,10,50,50);
		    	
		    	//var cavToImg=canvas.toDataURL('image/jpeg',1);//jpeg是不透明格式，转成图片时背景是黑色的
		    	var cavToImg=canvas.toDataURL('image/png',1);
		    	var img=document.getElementById('img');
		    	img.src=cavToImg;
		    },100);
		    
		    
		</script>
	</body>
</html>
